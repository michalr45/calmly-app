"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[815],{920:function(e,d,t){t.r(d),t.d(d,{default:function(){return g}});var o=t(252),n=t(963),r=t(577);const u=e=>((0,o.dD)("data-v-652f9177"),e=e(),(0,o.Cn)(),e),l={class:"add-form"},s=(0,o.Uk)(" Paste YouTube video url: Â "),a=u((()=>(0,o._)("input",{type:"submit",value:"Add",id:"add-button"},null,-1))),i={key:0},c={class:"container"},m=["src"],p=["onClick"];function h(e,d,t,u,h,b){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",l,[(0,o._)("form",{onSubmit:d[1]||(d[1]=(0,n.iM)(((...e)=>b.addEmbeddedSound&&b.addEmbeddedSound(...e)),["prevent"]))},[s,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=e=>h.urlInput=e)},null,512),[[n.nr,h.urlInput]]),a],32),h.error?((0,o.wg)(),(0,o.iD)("p",i,(0,r.zw)(h.error),1)):(0,o.kq)("",!0)]),(0,o._)("div",c,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(h.embeddedSounds,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.id,class:"item"},[(0,o._)("iframe",{width:"560",height:"315",src:e[1],title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope;\r\n              picture-in-picture",allowfullscreen:""},"\r\n      ",8,m),(0,o._)("button",{onClick:d=>b.deleteEmbeddedSound(e[2])},"delete",8,p)])))),128))]),(0,o.wy)((0,o._)("p",null,"...loading",512),[[n.F8,h.loading]])],64)}var b=t(718),w={name:"Embedded.vue",data(){return{retrievedUrls:[],embeddedSounds:[],loading:!1,urlInput:null,error:null}},methods:{async getEmbeddedSounds(){const e="/api/embedded_sounds/";this.loading=!0;try{const d=await b.o.get(e);this.retrievedUrls.push(...d.data);for(const e of this.retrievedUrls){let d=`https://www.youtube.com/oembed?url=${e.url}`,t=await b.o.get(d),o=t.data.html.match(/src="([^"]+)"/);o.push(e.id),this.embeddedSounds.push(o)}this.loading=!1,console.log(this.embeddedSounds)}catch(d){console.log(d)}},async addEmbeddedSound(){if(!this.urlInput||!this.urlInput.match(/^((?:https?:)?\/\/)?((?:www|m)\.)?(?:youtube\.com|youtu.be)(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/))return void(this.error="Provided answer does not match the correct url pattern. Please use only links to YouTube videos.");const e="/api/embedded_sounds/";try{await b.o.post(e,{url:this.urlInput}),this.urlInput=null,location.reload(),this.error&&(this.error=null)}catch(d){console.log(d)}},async deleteEmbeddedSound(e){const d=`/api/embedded_sounds/${e}/`;try{await b.o.delete(d),location.reload()}catch(t){console.log(t)}}},created(){this.getEmbeddedSounds()}},v=t(744);const y=(0,v.Z)(w,[["render",h],["__scopeId","data-v-652f9177"]]);var g=y}}]);
//# sourceMappingURL=embedded.1b12fe3c.js.map